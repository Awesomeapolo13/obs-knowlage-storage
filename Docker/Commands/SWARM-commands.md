
docker swarm init - запускает докер сварм

docker swarm join-token manager - получает токен для менеджера

docker node ls - показывает список нод, входящих в кластер. Команда выполняется на менеджерских серверах, на воркере она не сработает, т.к. у них нет прав на управление кластером.

docker swarm leave - выход ноды из кластера

docker swarm update - обновляет конфигурации кластера. Какой конфиг обновить зависит от передаваемых опций, см. --help

docker node inspect node_name --pretty - показывает информацию по ноде node_name в читаемом виде а не json (блогодаря --pretty)
!! Нужно обратить внимание на раздел Status: Availability: он показывает статус ноды.
Статусов три:
Active - нода активен, выполняет свои задачи и готов принять новые
Paused - нода не принимает новые задачи, но старые выполняет
Drained - нода не принимает новых задач, а старые переносит на другие ноды (полезен когда нагрузка спадает и можно снизить количество нод на время)

docker node promote/demote - повышает воркера до менеджера / опускает менеджера до воркера

docker service - создает сервис для сварма (см. --help для большей информации)

docker service --secret secret_name --name redis redis - создает сервис с именем redis для запуска на основе образа редиса, передавая в него секрет secret_name

docker service ps redis - просмотр тасков конкретного сервиса

docker service rm redis - удаляет сервис redis

docker secret - серия команд для работы с секретами, которые можно использовать при работе с контейнером (например секретные конфиги для подключения к БД и др.).

docker secret create secret_name file_name.txt - создаст секрет с именем secret_name, содержащий файл file_name.txt

docker secret ls - показывает список созданных секретов (таблица с полями ID, NAME, DRIVER, CREATED, UPDATED)

!! С конфигами все аналогично, только передавать ключ --config при создании сервиса и в команде использовтаь ключеваое слово config.


docker stack ls - показывает все задеплоеные стеки (стек - набор сервисов).

--orchestrator - опция позволяющая выбрать оркестратор, по уполчанию это swarm (swarm|kubernetes|all)

docker stack ps - посмотреть сервисы конкретного стека

docker stack deploy - выкладывает новый стек или обновляет уже существующий

docker stack deploy -c docker-stack.yml stack_name - выкладывает стек согласно переданному файлу docker-stack.yml и присваивает ему имя stack_name

docker stack services stack_name - покажет все сервисы принадлежащие к стеку stack_name