
# Заголовки HTTP

**Ключи:**
- Обратные:
	- [HTTP](http-protocol);
- Прямые:
	- 

**Хештеги:**
- #Protocol/HTTP 

## Определение

Заголовки HTTP — это скрытый коммуникатор протокола HTTP, предоставляющий важные метаданные как для запросов, так и для ответов.

Заголовки HTTP позволяют клиенту и серверу передавать дополнительную информацию с помощью HTTP-запроса или ответа. Заголовок HTTP состоит из имени без учета регистра, за которым следует двоеточие (:), а затем его значение. Пробелы перед значением игнорируются.

Есть 4 вида заголовков:
- Request;
- Response;
- General - общие;
- Entity - относящиеся только к сущности.

## Виды заголовков

Заголовки можно группировать в зависимости от их контекста:
**Заголовки запросов** - содержат дополнительную информацию о ресурсе, который необходимо получить, или о клиенте, запрашивающем ресурс.
**Заголовки ответов** - хранят дополнительную информацию об ответе, например его местоположение или о сервере, предоставляющем его.
**Заголовки представления** - содержат информацию о теле ресурса, например его тип MIME или примененное кодирование/сжатие.
**Заголовки полезной нагрузки** - содержат независимую от представления информацию о полезных данных, включая длину контента и кодировку, используемую для транспортировки.

Заголовки также можно сгруппировать в зависимости от того, как их обрабатывают прокси:

**Сквозные заголовки** - эти заголовки должны быть переданы конечному получателю сообщения: серверу для запроса или клиенту для ответа. Промежуточные прокси должны повторно передавать эти заголовки без изменений, а кэши должны хранить их.

**Пошаговые заголовки** - эти заголовки имеют смысл только для одного соединения транспортного уровня и не должны повторно передаваться прокси-серверами или кэшироваться. Обратите внимание, что с помощью заголовка Connection можно устанавливать только пошаговые заголовки.

*Нестандартные заголовки имеют префикс X.*

Популярные заголовки:
- Cookie;
- Cache;
- Referer - определяет с какого сайта пришел пользователь (удобно для рекламщиков);
- X-Forwarded-For - для прокси и определения клиента (используется всеми прокси типа nginx);
- Location - для редиректа;
- Range - когда файл большой, но нам нужно взять из него только кусочек;
- Transfer-Encoding:chunked - нужен для передачи очень крупных файлов (в запросе передается определенное количество байт каждый запрос).

## Cookies

- Клиент и сервер обмениваются ими на каждом запросе;
- 4КВ;
- Обеспечивает сохранение состояния:
	- Настройки конкретного пользователя;
	- Сессия;
	- Состояние авторизации;
	- др.

## Cache

Примеры:

- Cache-Control;
- Last-Modified;
- If-Unmodified-Since;
- If-Range;
- If-None-Match;
- If-Modified-Match;
- If-Match;
- Expires;
- ETag.

Уровни:
- Клиентский (браузер);
- Сетевой (CDN и пр.);
- Серверный (reverse-proxy, например nginx);
- Уровень приложения (само выше приложение).

![[Pasted image 20240806100752.png]]

