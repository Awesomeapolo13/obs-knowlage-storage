
# Сообщения

**Связи:**
- Обратные
	- [RabbitMQ](rabbit-mq.md);
- Прямые:

**Хештеги:**
- #Queue/Broker ;
- #Rabbit 


## Общие сведения


## AMQP 0-9-1

Сообщения в модели AMQP 0-9-1 имеют аттрибуты. Некоторые из них являются постоянными, они определены в документации протокола. Разработчику не нужно думать об их именовании, вот некоторые из них:

- Content type
- Content encoding
- Routing key
- Delivery mode (persistent or not)
- Message priority
- Message publishing timestamp
- Expiration period
- Publisher application id

Некоторые аттрибуты используются непосредственно брокером, но большинство открыто для свобоной интерпретации со стороны приложений, которые их принимают. Некоторые аттрибуты опциональны и известны как *заголовки*. Они похожи на заголовки типа X-Headers в HTTP. Аттрибуты сообщения задаются при их публикации.

Сообщения так же имеют полезную назгрузку (payload), которую AMQP броккеры рассматривают как непрозразный массив байтов.  Брокеры не проверяют и не модифицируют её. Есть возможность передавать в сообщениях только аттрибуты, без полезной нагрузки. Обычно для сериализации структурированных данных с целью публикации их в качестве полезной нагрузки сообщения используются форматы сериализации, такие как JSON, Thrift, Protocol Buffers и MessagePack. Одноранговые узлы протокола (Protocol peers) обычно используют поля «content-type» и «content-encoding» для передачи этой информации, но только по соглашению.

Так же сообщения могут быть опубликованы как персистентные, т.е. брокер сохраняет их на диск. При рестарте, система гарантирует, что полученные персистентные сообщения не будут потеряны. Публикация сообщений в постоянные (долговечные) точки доступа или такие же очереди не делает сообщения персистентными. Это зависит от режима первистентности сообщения (persistence mode). Но публикация сообщений как персистентных сказывается на производительности (так же как с хранилищами данных, долговечность данных достигается ценой происводительности).



