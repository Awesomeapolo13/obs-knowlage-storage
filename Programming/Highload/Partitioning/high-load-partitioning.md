
# Партиционирование

**Ключи:**
- Обратные:
	- [High load](high-load);
- Прямые:
	- [Виды репликации](high-load-replication-type);
	- [Репликация в MySQL](mysql-replicarion);

**Хештеги:**
- #Highload/Sharding
- #Highload/Partitioning

## Определение

**Партиционирование** - таблица разбивается на части и запрос выполняется параллельно над каждой частью таблицы.

Что дает:
- Можем поместить больше данных в одну таблицу, по тому как таблица будет представлять собой как бы множество таблиц;
- Удаление старых данных (партиционирование по времени) - например удалить данные за прошлые года, к которым никто не обращается;
- Оптимизация запросов (можно отбросить часть партиций) - например, при запросах выбираются партиции текущего года.

## Виды и способы разделения данных

*Горизонтальное* - строки таблицы в разных партициях.
*Вертикальное* - колонки таблицы в разных партициях.

Разделение данных:
- По диапазону значений - года, рейтинг и др.
- По точному списку значений - категории новостей и др.
- По хэшу - алгоритм хэширования будет определять в какую партицию отправить данные;
- По ключу - первичный ключ.

## Вертикальное партиционирование

Ручная реализация:
1) Денормализуем таблицу, вынося нужные колонки в отдельную табличку.
2) Связь остается по primary key
3) Можно сделать VIEW, чтобы не переделывать запросы по разным таблицым.

Важно!: Если данные из новой таблицы нужны в каждом запросе, получим замедление вместо ускорения.

## Горизонтальное партиционирование

Реализуется в каждой БД по разному. Есть встроенный функционал для партиционирования, например, в MySQL нужно сразу создать таблицу партиционированной, а в Postgre мы можем добавить партиции позже.