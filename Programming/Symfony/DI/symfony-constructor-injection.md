
# Инъекции зависимостей в конструктор

**Ключи**:
- Обратные:
	- [Symfony framework](Symfony-framework);
	- [Компонент внедрения зависимостей](symfony-di);

**Хештеги:** 
- #Programming/Symfony/DI;

## Реализация

Самый распространенный способ внедрения зависимостей — через конструктор класса. Для этого вам нужно добавить аргумент в сигнатуру конструктора, чтобы принять зависимость.

```php
// src/Mail/NewsletterManager.php
namespace App\Mail;

// ...
class NewsletterManager
{
    public function __construct(
        private MailerInterface $mailer,
    ) {
    }

    // ...
}
```

Вы можете указать, какой сервис вы хотите добавить в конфигурацию сервисного контейнера:

```yaml
# config/services.yaml
services:
    # ...

    App\Mail\NewsletterManager:
        arguments: ['@mailer']
```

## Преимущества

- Если зависимость является требованием и класс не может работать без нее, то ее внедрение через конструктор гарантирует ее присутствие при использовании класса, поскольку класс не может быть создан без нее.
- Конструктор вызывается только один раз при создании объекта, поэтому вы можете быть уверены, что зависимость не изменится в течение жизни объекта.

## Недостатки

- внедрение конструктора не подходит для работы с необязательными зависимостями;
- сложнее использовать в сочетании с иерархиями классов: если класс использует внедрение конструктора, то его расширение и переопределение конструктора становятся проблематичными.