
# PSR-11: Container interface

**Ключи:**
- [PHP стандарты (PSR)](php-standarts);

**Хештеги:** #Programming/PHP/Standarts

## Цель

В этом документе описывается общий интерфейс для контейнеров внедрения зависимостей.

Цель, поставленная ContainerInterface, — стандартизировать то, как платформы и библиотеки используют контейнер для получения объектов и параметров (называемых записями в остальной части этого документа).

## Базовые понятия

**Идентификатор записи** — это любая разрешенная PHP строка, содержащая хотя бы один символ, которая однозначно идентифицирует элемент внутри контейнера. Идентификатор записи представляет собой непрозрачную строку, поэтому вызывающие программы НЕ ДОЛЖНЫ предполагать, что структура строки несет какое-либо семантическое значение.

Сам интерфейс `Psr\Container\ContainerInterface` предоставляет два метода: `get` и `has`:
- `get` - принимает один обязательный параметр: идентификатор записи, который ДОЛЖЕН быть строкой. Может вернуть что угодно (`mixed`) или выбросить исключение `NotFoundExceptionInterface`. Два последовательных вызова `get` с одним и тем же идентификатором ДОЛЖНЫ возвращать одно и то же значение. Однако в зависимости от конструкции реализации и/или конфигурации пользователя могут быть возвращены разные значения, поэтому пользователю НЕ СЛЕДУЕТ рассчитывать на получение одного и того же значения при двух последовательных вызовах.
- `has` - принимает один уникальный параметр: идентификатор записи, который ДОЛЖЕН быть строкой. ДОЛЖЕН возвращать `true`, если идентификатор записи известен контейнеру, и `false`, если это не так. Если `has($id)` возвращает `false`, `get($id)` ДОЛЖЕН выдать `NotFoundExceptionInterface`.

Пользователям НЕ СЛЕДУЕТ передавать контейнер в объект, чтобы объект мог получить свои собственные зависимости. Это означает, что контейнер используется в качестве локатора службы (Service Locator), что обычно не рекомендуется.

## Исключения

Исключения, создаваемые непосредственно контейнером, ДОЛЖНЫ реализовывать интерфейс `Psr\Container\ContainerExceptionInterface`.

Вызов метода `get` с несуществующим идентификатором ДОЛЖЕН вызвать `Psr\Container\NotFoundExceptionInterface`.

