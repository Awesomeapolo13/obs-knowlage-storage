
# Детальное описание PHP-FPM

**Связи:**
- Обратные
	- [PHP-FPM](php-fpm);
- Прямые:
	

**Хештеги:** #Programming/PHP/PHP-FPM

## Инициализация Master Process

При запуске системы происходит следующая последовательность:

1) Чтение конфигурации из /etc/php/8.3/fpm/php-fpm.conf
2) Создание PID файла /var/run/php-fpm.pid
3) Настройка обработчиков системных сигналов
4) Инициализация каждого пула процессов
5) Переход в daemon режим (фоновый процесс)

## Создание Worker Processes

Для каждого пула моздается собственный набор worker-процессов:

1) Создание сокета (Unix или TCP) для с веб-сервером
2) Создание начальных worker-процессов (p,.start_servers)
3) Настройка прав доступа к сокету
4) Запуск основного цикла мониторинга

## Основной цикл работы

Master-процесс постоянно выполняет цикл управления:

1) Обработка системных сигналов (SIGTERM, SIGHUP для перезагрузки)
2) Мониторинг состояния воркер процессов
3) Балансировка нагрузки (создание/уничтожение процессов)
4) Принятие новых соединений от веб-сервера
5) Очистка завершенных процессов

