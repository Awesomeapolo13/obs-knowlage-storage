
# CHECK

**Ключи:**
- Обратные:
	- [MySQL](MySQL);
	- [Ограничения](mysql-constraints);
- Прямые:

**Хештеги:** #Programming/Databases/MySQL/Constraints 

## Определение

**Ограничение CHECK** — это ограничение, обеспечивающее соответствие значений в колонке или группе колонок таблицы указанному условию. До MySQL 8.0.16 `CREATE TABLE` позволяет включать ограничение `CHECK` таблицы. Однако MySQL игнорирует все ограничения `CHECK`.  Начиная с MySQL 8.0.16, `CREATE TABLE` поддерживает основные функции ограничений `CHECK` таблиц и столбцов для всех механизмов хранения.

## Синтаксис

Базовый синтаксис для ограничения `CHECK`:

```sql
CONSTRAINT constraint_name 
CHECK (expression) 
[ENFORCED | NOT ENFORCED]
```

где:
- `constraint_name` - имя проверки, которпую вы хотите применить (если пропустить, то MySQL автоматически создасть имя по шаблону `table_name_chk_n`, где n - просто порядкоывый номер ограничения);
- `expression` - булево выражение, которое должно возвращать `TRUE` или `UNKNOWN` для каждой строки;
- `[ENFORCED | NOT ENFORCED]` - опционально можно указать предложение принудительного применения:
	- `ENFORCED` - чтобы создать и обеспечить применение ограничения (можно указать или опустить его);
	- `NOT ENFORCED` - чтобы создать ограничение, но не использовать его.

При операциях `INSERT` или `UPDATE` несоотвествии, не соотвесттвующих ограничению `CHECK` будет выброшена ошибка:

```bash
Error Code: 3819. Check constraint 'parts_chk_2' is violated.
```

Ограничение таблицы `CHECK` может ссылаться на несколько столбцов, тогда как ограничение столбца `CHECK` может ссылаться на единственный столбец, в котором оно определено.

Добавить ограничение `CHECK` можно двумя способами (второй дает возможность задать имя ограничения):

```sql
ALTER TABLE table_name
ADD CHECK (expression);
```
```sql
ALTER TABLE table_name
ADD CONSTRAINT contraint_name
CHECK (expression);
```

 Для удаления ограничений используется выражение ниже:

```sql
ALTER TABLE table_name
DROP CHECK constraint_name;
```
