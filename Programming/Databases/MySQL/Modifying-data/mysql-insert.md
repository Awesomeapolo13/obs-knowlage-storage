
# INSERT

**Ключи:**
- Обратные:
	- [MySQL](MySQL);
	- [Модификация данных MySQL](mysql-modifying-data);

**Хештеги:** 
- #Programming/Databases/MySQL/Modify

## Синтаксис

### Вставка одной строки

Оператор INSERT позволяет вставить в таблицу одну или несколько новых строк. Синтаксис инструкции INSERT:

```sql
INSERT INTO table_name(column1, column2,...) VALUES (value1, value2,...);
```

- определяются имя таблицы и колонки через запятую, перед которыми ставится выражение `INSERT INTO`;
- затем после выкажения `VALUES` перечисляются значения для каждой из колонок.


При использовании оператора `INSERT` необходимо убедиться, что количество столбцов соответствует количеству значений. Кроме того, значения для колонок должны быть перечислены в том же порядке, что и сами колонки.

Если необязательные колонки и значения не перечислены, они будут заполнены значениями по умолчанию. Либо же можно указать имя колонки, а в значении - ключевое слово `DEFAULT`.

### Вставка множества строк

Для добавления множества колонок:

```sql
INSERT INTO table(column1, column2,...) 
VALUES 
  (value1, value2,...), 
  (value1, value2,...), 
  ...
  (value1, value2,...);
```

Количество строк для множественной вставки ограничено значением опции `max_allowed_packet`. Добавление большего количества строк вызовет ошибку. Можно проверить значение этой опции:

```sql
SHOW VARIABLES LIKE 'max_allowed_packet';
```

Вывод:

```shell
+--------------------+----------+
| Variable_name      | Value    |
+--------------------+----------+
| max_allowed_packet | 67108864 |
+--------------------+----------+
1 row in set (0.01 sec)
```

Число в столбце «Value» — это количество байтов.

Чтобы установить новое значение для переменной max_allowed_packet, вы используете оператор `SET GLOBAL`:

```sql
SET GLOBAL max_allowed_packet=size;
```

В этом операторе `size` представляет собой целое число - максимально допустимого размера пакета в байтах.

*Следует отметить, что `max_allowed_packet` не влияет на оператор` INSERT INTO .. ​​SELECT`. Выражение `INSERT INTO .. ​​SELECT` может вставлять столько угодно строк.*

Так же при использовании операции `SELECT LAST_INSERT_ID();` после множественной вставки строк, она вернет id первой вставленной строки из всех.

