
# Entity-Attribute-Value (EAV)

**Ключи:**
- Обратные:
	- [Базы данных](databases);
	- [Подходы к проектированию БД](database-design);
- Прямые:

**Хештеги:** #Programming/Databases/Design

## Определение

**Модель EAV (Entity-Attribute-Value)** — это способ проектирования базы данных, который используется для хранения информации, которая может быть очень разнообразной и изменчивой по своей структуре. Эта модель часто применяется в ситуациях, когда необходимо хранить данные с большим количеством атрибутов, которые могут отсутствовать в большинстве записей, или когда атрибуты и их значения могут часто изменяться. EAV особенно популярна в областях, где требуется высокая гибкость модели данных, например, в медицинских информационных системах, CRM-системах, конфигураторах продуктов и т.д.

## Компоненты

Модель EAV состоит из трех основных компонентов:

- **Entity (Сущность)**: Объект или концепция, для которой хранятся данные. Например, пациент в медицинской информационной системе.
- **Attribute (Атрибут)**: Характеристика или свойство сущности. Например, возраст, вес или диагноз пациента.
- **Value (Значение)**: Конкретное значение атрибута для сущности. Например, 29 лет, 70 кг, наличие аллергии.

## Преимущества

- **Гибкость**: Модель позволяет легко добавлять новые атрибуты без изменения структуры базы данных.
- **Экономия места**: Хранение только тех атрибутов, которые имеют значения, может сократить объем неиспользуемого пространства в базе данных.

## Недостатки

- **Сложность запросов**: Запросы к EAV-модели могут быть более сложными и менее производительными по сравнению с традиционными реляционными моделями, особенно при необходимости агрегации данных.
- **Управление целостностью данных**: Обеспечение целостности и валидации данных может быть более сложным, поскольку типы данных и ограничения не встроены в структуру базы данных на уровне таблицы.
- **Производительность**: Для больших объемов данных и сложных запросов производительность может стать проблемой из-за необходимости выполнения множественных операций соединения.

## Пример

В базе данных EAV вместо традиционной таблицы с фиксированным набором столбцов для каждой сущности используются три таблицы: одна для хранения сущностей, одна для атрибутов и одна для значений атрибутов. Например, для хранения информации о пациентах:

- Таблица `Entities` может содержать ID и имя каждого пациента.
- Таблица `Attributes` содержит список атрибутов, таких как "Возраст", "Вес", "Диагноз".
- Таблица `Values` связывает сущности и атрибуты, храня конкретные значения для каждой пары сущность-атрибут.
