
# Кластеризованные индексы

Когда кто-то говорит, что данные не хранятся в таблице каким либо определенным образом, имеется ввиду, сколько механизмов БД работает по умолчанию. Механизмы БД позволяют хранить данные в порядке, указанном пользователем. Такие виды таблиц и называются **кластеризованными индексами** (SQL Server) или **индекстно-оргазованными таблицами** (Oracle).

Такой вид структуры, это смесь таблицы и индекса. Данные ключевого столбца индекса упорядочены (как в индексе), но вместо указателя на то место, где фактические данные находятся в таблице, он включает остальные данные (выделенные зеленым цветом на рисунке ниже), после проиндексированного столбца или столбцов (выделены синим цветом). 

![[Pasted image 20230731092956.png]]

Кластерные индексы - очень эффективный способ получения любой информации, поскольку нет нобходимости использовать указатель для извлечения фактических даных после того, как значение найдено в индексе. Однако они имеют некоторые оговорки, самая важная из них заключается в том, что столбец или столбцы, выбранны в качестве ключа индекса, не должны меняться, чтобы избежать "перемещения" данных из одного блока/страницы в другой.

```sql
CREATE CLUSTERED INDEX IndexName ON TableName (IndexedColumn [, IndexedColumnN]);
```

*Заметка 1:* Таблица может иметь только один кластеризованный индекс, т.к. он фактически заменяет табличное хранилище. Однако, можно добавить в таблицу дополнительные некластеризованные индексы.

*Заметка 2:* По умолчанию SQL Server создает кластеризованный индекс всякий раз, когда для таблицы определен первичный ключ, однако можно выбрать и другие столбцы для ключа индекса или создать таблицу как обычную кучу.

**Ключи:**
- [Индексы](db-index);
- [Типы индексов](db-index-types);

**Хештеги:** #Programming/Databases/Index/Types