
# Индексы с INCLUDE (Индексы покрытия)

**Ключи:**
- Обратные:
	- [Индексы](db-index);
	- [Типы индексов](db-index-types);

**Хештеги:** #Programming/Databases/Index/Types

Некоторые движки (SQL Server), позволяют вам указывать  специальное выражение INCLUDE. Это позволяет включать значения для дополнительных столбцов (но не использовать их для упорядочения) помимо ключевых столбцов индекса. Можно считать индекс с INCLUDE сокращенной версией кластеризованного индекса, поскольку мы храним только некоторые столбцы вместе с ключем индекса, а не всю строку.

Включение часто используемых столбцов может снизить потребность в доступе к фактической таблице для поиска значений для этих столбцов, что сделает запросы еще быстрее.

Синтаксис:

```sql
CREATE INDEX IndexName
ON TableName (IndexedColumn [, IndexedColumnN])
INCLUDE (Column1 [,Column2]);
```

Пример:

```sql
CREATE INDEX IX_Vehicle_LicensePlate_iBrandModel
ON Vehicle (LicensePlate)
INCLUDE (Brand, Model);
```

С созданным выше индексом запрос снизу может быть выполнен без чтения данных из таблицы, т.к. условие фильтра и столбцы доступны в индексе.

```sql
SELECT LicensePlate, Brand, Model
FROM Vehicle
WHERE LicensePlate = ‘6TRJ999’;
```

Присоздании индексов с предложением INCULDE помните:

- Подобные индексы требуют больше места. Им необходимо хранить ключевые столбцы индекса, указатель на ключевые данные и включенные столбцы;
- Если значения включенных столбцов ихменилось, их нужно будет обновить как в таблице, так и в каждом индексе, в который они включены. Это вызывает накладные расходы на операции DML.

Примечание: [Кластеризованные индексы](db-index-types-clustered) не могут использовать выражение INCLUDE, поскольку на самом деле хранят все столбцы таблицы.
